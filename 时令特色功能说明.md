# 🌿 时令特色功能说明

## 功能概述

为菜谱管理系统新增了**时令特色标注功能**，在原有的季节分析和中医养生功能基础上，进一步标注每道菜的时令特色，帮助用户更好地了解菜品的季节性特点。

## 新增功能

### 1. 时令特色分析
- **AI智能分析**：DeepSeek Chat模型会分析菜品的食材特性，判断是否为时令菜
- **专业标注**：区分春季时令菜、夏季时令菜、秋季时令菜、冬季时令菜或四季家常菜
- **详细说明**：提供时令特色的具体说明，如"春笋是典型的春季时令食材，清明前后最为鲜嫩"

### 2. 增强的AI提示词
更新了AI分析的提示词，新增以下任务：
```
2. 标注时令菜品：判断这道菜是否为时令菜（当季食材制作），如春季时令菜、夏季时令菜等，或者是四季皆宜的家常菜；
```

### 3. 数据结构扩展
在`wellness_info`中新增`seasonal_feature`字段：
```json
{
  "wellness_info": {
    "solar_term": "清明、谷雨（属于春季）",
    "seasonal_feature": "春季时令菜（春笋是典型的春季时令食材，清明前后最为鲜嫩）",
    "tcm_theory": "中医理论解读...",
    "health_tips": "养生提示..."
  }
}
```

### 4. 界面显示优化
在菜谱详情页面的"中医养生解读"区域新增**时令特色**显示：
- 🌱 使用绿叶图标表示时令特色
- ⭐ 突出显示时令特色内容
- 📍 位置安排在推荐节气之后，黄帝内经解读之前

## 使用示例

### 春季时令菜示例
**菜名**：春笋炒肉丝
- **推荐节气**：清明、谷雨（属于春季）
- **时令特色**：春季时令菜（春笋是典型的春季时令食材，清明前后最为鲜嫩）
- **黄帝内经解读**：春季宜食辛甘发散之品...
- **养生提示**：春笋富含膳食纤维，能助春季阳气升发...

### 四季家常菜示例
**菜名**：丝瓜炒蛏子
- **推荐节气**：大暑至处暑（属于长夏季节）
- **时令特色**：四季家常菜
- **黄帝内经解读**：长夏属土，主脾...
- **养生提示**：此菜特别适合暑湿困脾时食用...

## 技术实现

### 1. AI分析流程
1. 用户添加菜谱后，系统立即保存基本信息
2. 后台异步调用DeepSeek Chat模型进行分析
3. AI根据食材特性、季节性、传统饮食文化等因素判断时令特色
4. 解析AI返回结果，提取时令特色信息
5. 更新菜谱数据，保存完整的养生信息

### 2. 解析逻辑
```python
# 提取时令特色
seasonal_feature_match = re.search(r'【时令特色】[：:]\s*([^\n【]+)', ai_text, re.DOTALL)
if seasonal_feature_match:
    seasonal_feature_text = seasonal_feature_match.group(1).strip()
    wellness_info['seasonal_feature'] = seasonal_feature_text
```

### 3. 数据兼容性
- 自动为旧菜谱添加`seasonal_feature`字段，默认值为"四季家常菜"
- 保持向后兼容，不影响现有功能
- 支持批量分析和更新

## 用户体验

### 优势特点
1. **专业性**：结合中医养生理论和传统饮食文化
2. **实用性**：帮助用户选择当季最适宜的菜品
3. **教育性**：增进对时令饮食的了解
4. **便捷性**：AI自动分析，无需人工标注

### 使用场景
- 🌸 **春季**：寻找春笋、韭菜等春季时令菜
- ☀️ **夏季**：选择清热解暑的时令菜品
- 🍂 **秋季**：品尝滋阴润燥的秋季美食
- ❄️ **冬季**：享用温补养生的冬季菜肴

## 未来扩展

### 可能的功能增强
1. **时令食材推荐**：根据当前季节推荐时令食材
2. **节气菜谱**：按二十四节气细分菜谱推荐
3. **地域时令**：结合地理位置提供本地时令菜品
4. **时令日历**：制作时令菜品日历功能

---

*该功能已完全集成到现有系统中，所有新添加的菜谱都会自动获得时令特色分析。* 